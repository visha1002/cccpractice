<?php
$orders = Mage::getModel('sales/order')->getCollection();
?>
<section class="list">
    <table class="table_body">
        <h3>Placed Orders</h3>
        <thead>
            <tr>
                <th>Order Id</th>
                <th>Order Number</th>
                <th>Tax Percent</th>
                <th>Grand Total</th>
                <th>Payment Id</th>
                <th>Shipping Id</th>
                <th>Customer Id</th>
                <th>Status</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
            <?php
            foreach ($orders->getData() as $orderView):
                ?>
                <tr>
                    <td>
                        <?php echo $orderView->getId() ?>
                    </td>
                    <td>
                        <?php echo $orderView->getOrderNumber() ?>
                    </td>
                    <td>
                        <?php echo $orderView->getTaxPercent() ?>
                    </td>
                    <td>
                        <?php echo $orderView->getGrandTotal() ?>
                    </td>
                    <td>
                        <?php echo $orderView->getPaymentId() ?>
                    </td>
                    <td>
                        <?php echo $orderView->getShippingId() ?>
                    </td>
                    <td>
                        <?php echo $orderView->getCustomerId() ?>
                    </td>
                    <td>
                        <form action="<?php echo $this->getUrl("admin/orders/status") ?>" method="post">
                            <input type="text" hidden value="<?php echo $orderView->getOrderNumber() ?>"
                                name="status[order_number]">
                            <select name="status[status]" class="p-2">
                                <option value="pending" <?php echo (($orderView->getStatus()) == 'pending')
                                    ? "selected"
                                    : "";
                                ?>>Pending</option>
                                <option value="shipped" <?php echo (($orderView->getStatus()) == 'shipped')
                                    ? "selected"
                                    : "";
                                ?>>Shipped</option>
                                <option value="in-process" <?php echo (($orderView->getStatus()) == 'in-process')
                                    ? "selected"
                                    : "";
                                ?>>In-Process</option>
                                <option value="can-Request" <?php echo (($orderView->getStatus()) == 'can-Request')
                                    ? "selected"
                                    : "";
                                ?>>Can-Request</option>
                                <option value="cancelled" <?php echo (($orderView->getStatus()) == 'cancelled')
                                    ? "selected"
                                    : "";
                                ?>>Cancelled</option>
                                <option value="declined" <?php echo (($orderView->getStatus()) == 'declined')
                                    ? "selected"
                                    : "";
                                ?>>Declined</option>
                                <option value="refunded" <?php echo (($orderView->getStatus()) == 'refunded')
                                    ? "selected"
                                    : "";
                                ?>>Refunded</option>
                                <option value="completed" <?php echo (($orderView->getStatus()) == 'completed')
                                    ? "selected"
                                    : "";
                                ?>>Completed</option>
                            </select>
                    <td>
                        <button type="submit" class="edit">Edit</button>
                    </td>
                    </form>
                    <td>
                        <a href="delete?pid=<?php echo $orderView->getId() ?>" class="delete">Delete</a>
                    </td>
                </tr>
            <?php endforeach; ?>
        </tbody>
    </table>


    <?php
    // if($orderView->getCancellationRequest())
// print_r($orderView->getCancellationRequest());
    
    $cancelOrders = $this->getCancelReqestOrders();

    ?>

    <table class="table_body">
        <h3 class="mt-5">Cancellation request</h3>
        <thead>
            <tr>
                <th>Order Id</th>
                <th>Order Number</th>
                <th>Customer Id</th>
                <th>Status</th>
                <th>Approve</th>
                <th>Decline</th>
            </tr>
        </thead>
        <tbody>
            <?php
            foreach ($cancelOrders->getData() as $cancel):
                ?>
                <tr>
                    <td>
                        <?php echo $cancel->getId() ?>
                    </td>
                    <td>
                        <?php echo $cancel->getOrderNumber() ?>
                    </td>
                    <td>
                        <?php echo $cancel->getCustomerId() ?>
                    </td>
                    <td>
                        <?php echo $cancel->getStatus() ?>
                    <td>
                        <a href="" class="edit">Approve</a>
                    </td>
                    <td>
                        <a href="" class="delete">Decline</a>
                    </td>
                </tr>
            <?php endforeach; ?>
        </tbody>
    </table>
</section>